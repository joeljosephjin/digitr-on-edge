/*!
 * ONNX Runtime Web v1.17.0-dev.20231103-1439da36fe
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
"use strict";var ort=(()=>{var qe=Object.defineProperty;var Hr=Object.getOwnPropertyDescriptor;var jr=Object.getOwnPropertyNames;var $r=Object.prototype.hasOwnProperty;var P=(n,t)=>()=>(n&&(t=n(n=0)),t);var Gr=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),be=(n,t)=>{for(var e in t)qe(n,e,{get:t[e],enumerable:!0})},Yr=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of jr(t))!$r.call(n,s)&&s!==e&&qe(n,s,{get:()=>t[s],enumerable:!(i=Hr(t,s))||i.enumerable});return n};var Pe=n=>Yr(qe({},"__esModule",{value:!0}),n);var _e,fe,re,Be,De=P(()=>{"use strict";_e=new Map,fe=[],re=(n,t,e)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let i=_e.get(n);if(i===void 0)_e.set(n,{backend:t,priority:e});else{if(i.priority>e)return;if(i.priority===e&&i.backend!==t)throw new Error(`cannot register backend "${n}" using priority ${e}`)}if(e>=0){let s=fe.indexOf(n);s!==-1&&fe.splice(s,1);for(let p=0;p<fe.length;p++)if(_e.get(fe[p]).priority<=e){fe.splice(p,0,n);return}fe.push(n)}return}throw new TypeError("not a valid backend")},Be=async n=>{let t=n.length===0?fe:n,e=[];for(let i of t){let s=_e.get(i);if(s){if(s.initialized)return s.backend;if(s.aborted)continue;let p=!!s.initPromise;try{return p||(s.initPromise=s.backend.init()),await s.initPromise,s.initialized=!0,s.backend}catch(u){p||e.push({name:i,err:u}),s.aborted=!0}finally{delete s.initPromise}}}throw new Error(`no available backend found. ERR: ${e.map(i=>`[${i.name}] ${i.err}`).join(", ")}`)}});var vt=P(()=>{"use strict";De()});var It,xt=P(()=>{"use strict";It="1.17.0-dev.20231103-1439da36fe"});var Pt,Xe,_t=P(()=>{"use strict";xt();Pt="warning",Xe={wasm:{},webgl:{},webgpu:{},versions:{common:It},set logLevel(n){if(n!==void 0){if(typeof n!="string"||["verbose","info","warning","error","fatal"].indexOf(n)===-1)throw new Error(`Unsupported logging level: ${n}`);Pt=n}},get logLevel(){return Pt}};Object.defineProperty(Xe,"logLevel",{enumerable:!0})});var R,Bt=P(()=>{"use strict";_t();R=Xe});var Dt,Ct,Mt=P(()=>{"use strict";Dt=(n,t)=>{let e=document.createElement("canvas");e.width=n.dims[3],e.height=n.dims[2];let i=e.getContext("2d");if(i!=null){let s,p;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(s=n.dims[2],p=n.dims[3]):(s=n.dims[3],p=n.dims[2]);let u=t?.format!==void 0?t.format:"RGB",f=t?.norm,d,l;f===void 0||f.mean===void 0?d=[255,255,255,255]:typeof f.mean=="number"?d=[f.mean,f.mean,f.mean,f.mean]:(d=[f.mean[0],f.mean[1],f.mean[2],0],f.mean[3]!==void 0&&(d[3]=f.mean[3])),f===void 0||f.bias===void 0?l=[0,0,0,0]:typeof f.bias=="number"?l=[f.bias,f.bias,f.bias,f.bias]:(l=[f.bias[0],f.bias[1],f.bias[2],0],f.bias[3]!==void 0&&(l[3]=f.bias[3]));let h=p*s,w=0,y=h,b=h*2,A=-1;u==="RGBA"?(w=0,y=h,b=h*2,A=h*3):u==="RGB"?(w=0,y=h,b=h*2):u==="RBG"&&(w=0,b=h,y=h*2);for(let O=0;O<p;O++)for(let v=0;v<s;v++){let _=(n.data[w++]-l[0])*d[0],D=(n.data[y++]-l[1])*d[1],q=(n.data[b++]-l[2])*d[2],G=A===-1?255:(n.data[A++]-l[3])*d[3];i.fillStyle="rgba("+_+","+D+","+q+","+G+")",i.fillRect(v,O,1,1)}return e.toDataURL()}else throw new Error("Can not access image data")},Ct=(n,t)=>{let e=document.createElement("canvas").getContext("2d"),i;if(e!=null){let s,p,u;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(s=n.dims[2],p=n.dims[1],u=n.dims[3]):(s=n.dims[3],p=n.dims[2],u=n.dims[1]);let f=t!==void 0&&t.format!==void 0?t.format:"RGB",d=t?.norm,l,h;d===void 0||d.mean===void 0?l=[255,255,255,255]:typeof d.mean=="number"?l=[d.mean,d.mean,d.mean,d.mean]:(l=[d.mean[0],d.mean[1],d.mean[2],255],d.mean[3]!==void 0&&(l[3]=d.mean[3])),d===void 0||d.bias===void 0?h=[0,0,0,0]:typeof d.bias=="number"?h=[d.bias,d.bias,d.bias,d.bias]:(h=[d.bias[0],d.bias[1],d.bias[2],0],d.bias[3]!==void 0&&(h[3]=d.bias[3]));let w=p*s;if(t!==void 0&&(t.format!==void 0&&u===4&&t.format!=="RGBA"||u===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let y=4,b=0,A=1,O=2,v=3,_=0,D=w,q=w*2,G=-1;f==="RGBA"?(_=0,D=w,q=w*2,G=w*3):f==="RGB"?(_=0,D=w,q=w*2):f==="RBG"&&(_=0,q=w,D=w*2),i=e.createImageData(s,p);for(let T=0;T<p*s;b+=y,A+=y,O+=y,v+=y,T++)i.data[b]=(n.data[_++]-h[0])*l[0],i.data[A]=(n.data[D++]-h[1])*l[1],i.data[O]=(n.data[q++]-h[2])*l[2],i.data[v]=G===-1?255:(n.data[G++]-h[3])*l[3]}else throw new Error("Can not access image data");return i}});var Je,Rt,Lt,kt,Ut,Ft=P(()=>{"use strict";Ce();Je=(n,t)=>{if(n===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:e,width:i}=t,s=t.norm??{mean:255,bias:0},p,u;typeof s.mean=="number"?p=[s.mean,s.mean,s.mean,s.mean]:p=[s.mean[0],s.mean[1],s.mean[2],s.mean[3]??255],typeof s.bias=="number"?u=[s.bias,s.bias,s.bias,s.bias]:u=[s.bias[0],s.bias[1],s.bias[2],s.bias[3]??0];let f=t.format!==void 0?t.format:"RGBA",d=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",l=e*i,h=d==="RGBA"?new Float32Array(l*4):new Float32Array(l*3),w=4,y=0,b=1,A=2,O=3,v=0,_=l,D=l*2,q=-1;f==="RGB"&&(w=3,y=0,b=1,A=2,O=-1),d==="RGBA"?q=l*3:d==="RBG"?(v=0,D=l,_=l*2):d==="BGR"&&(D=0,_=l,v=l*2);for(let T=0;T<l;T++,y+=w,A+=w,b+=w,O+=w)h[v++]=(n[y]+u[0])/p[0],h[_++]=(n[b]+u[1])/p[1],h[D++]=(n[A]+u[2])/p[2],q!==-1&&O!==-1&&(h[q++]=(n[O]+u[3])/p[3]);return d==="RGBA"?new $("float32",h,[1,4,e,i]):new $("float32",h,[1,3,e,i])},Rt=async(n,t)=>{let e=typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement,i=typeof ImageData<"u"&&n instanceof ImageData,s=typeof ImageBitmap<"u"&&n instanceof ImageBitmap,p=typeof n=="string",u,f=t??{};if(e){let d=document.createElement("canvas");d.width=n.width,d.height=n.height;let l=d.getContext("2d");if(l!=null){let h=n.height,w=n.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(h=t.resizedHeight,w=t.resizedWidth),t!==void 0){if(f=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");f.tensorFormat="RGBA",f.height=h,f.width=w}else f.tensorFormat="RGBA",f.height=h,f.width=w;l.drawImage(n,0,0),u=l.getImageData(0,0,w,h).data}else throw new Error("Can not access image data")}else if(i){let d,l;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(d=t.resizedHeight,l=t.resizedWidth):(d=n.height,l=n.width),t!==void 0&&(f=t),f.format="RGBA",f.height=d,f.width=l,t!==void 0){let h=document.createElement("canvas");h.width=l,h.height=d;let w=h.getContext("2d");if(w!=null)w.putImageData(n,0,0),u=w.getImageData(0,0,l,d).data;else throw new Error("Can not access image data")}else u=n.data}else if(s){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let d=document.createElement("canvas");d.width=n.width,d.height=n.height;let l=d.getContext("2d");if(l!=null){let h=n.height,w=n.width;return l.drawImage(n,0,0,w,h),u=l.getImageData(0,0,w,h).data,f.height=h,f.width=w,Je(u,f)}else throw new Error("Can not access image data")}else{if(p)return new Promise((d,l)=>{let h=document.createElement("canvas"),w=h.getContext("2d");if(!n||!w)return l();let y=new Image;y.crossOrigin="Anonymous",y.src=n,y.onload=()=>{h.width=y.width,h.height=y.height,w.drawImage(y,0,0,h.width,h.height);let b=w.getImageData(0,0,h.width,h.height);f.height=h.height,f.width=h.width,d(Je(b.data,f))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(u!==void 0)return Je(u,f);throw new Error("Input data provided is not supported - aborted tensor creation")},Lt=(n,t)=>{let{width:e,height:i,download:s,dispose:p}=t,u=[1,i,e,4];return new $({location:"texture",type:"float32",texture:n,dims:u,download:s,dispose:p})},kt=(n,t)=>{let{dataType:e,dims:i,download:s,dispose:p}=t;return new $({location:"gpu-buffer",type:e??"float32",gpuBuffer:n,dims:i,download:s,dispose:p})},Ut=(n,t,e)=>new $({location:"cpu-pinned",type:n,data:t,dims:e??[t.length]})});var Ee,Me,Wt,Nt,zt=P(()=>{"use strict";Ee=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Me=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),Wt=!1,Nt=()=>{if(!Wt){Wt=!0;let n=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",t=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";n&&(Ee.set("int64",BigInt64Array),Me.set(BigInt64Array,"int64")),t&&(Ee.set("uint64",BigUint64Array),Me.set(BigUint64Array,"uint64"))}}});var Ht,jt,$t=P(()=>{"use strict";Ce();Ht=n=>{let t=1;for(let e=0;e<n.length;e++){let i=n[e];if(typeof i!="number"||!Number.isSafeInteger(i))throw new TypeError(`dims[${e}] must be an integer, got: ${i}`);if(i<0)throw new RangeError(`dims[${e}] must be a non-negative integer, got: ${i}`);t*=i}return t},jt=(n,t)=>{switch(n.location){case"cpu":return new $(n.type,n.data,t);case"cpu-pinned":return new $({location:"cpu-pinned",data:n.data,type:n.type,dims:t});case"texture":return new $({location:"texture",texture:n.texture,type:n.type,dims:t});case"gpu-buffer":return new $({location:"gpu-buffer",gpuBuffer:n.gpuBuffer,type:n.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${n.location} is not supported`)}}});var $,Ce=P(()=>{"use strict";Mt();Ft();zt();$t();$=class{constructor(t,e,i){Nt();let s,p;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,s=t.type,p=t.dims,t.location){case"cpu-pinned":{let f=Ee.get(s);if(!f)throw new TypeError(`unsupported type "${s}" to create tensor from pinned buffer`);if(!(t.data instanceof f))throw new TypeError(`buffer should be of type ${f.name}`);this.cpuData=t.data;break}case"texture":{if(s!=="float32")throw new TypeError(`unsupported type "${s}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(s!=="float32"&&s!=="float16"&&s!=="int32"&&s!=="int64"&&s!=="uint32"&&s!=="bool")throw new TypeError(`unsupported type "${s}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let f,d;if(typeof t=="string")if(s=t,d=i,t==="string"){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");f=e}else{let l=Ee.get(t);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e)){if(t==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");t==="uint64"||t==="int64"?f=l.from(e,BigInt):f=l.from(e)}else if(e instanceof l)f=e;else throw new TypeError(`A ${s} tensor's data must be type of ${l}`)}else if(d=e,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof t[0];if(l==="string")s="string",f=t;else if(l==="boolean")s="bool",f=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else{let l=Me.get(t.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);s=l,f=t}if(d===void 0)d=[f.length];else if(!Array.isArray(d))throw new TypeError("A tensor's dims must be a number array");p=d,this.cpuData=f,this.dataLocation="cpu"}let u=Ht(p);if(this.cpuData&&u!==this.cpuData.length)throw new Error(`Tensor's size(${u}) does not match data length(${this.cpuData.length}).`);this.type=s,this.dims=p,this.size=u}static async fromImage(t,e){return Rt(t,e)}static fromTexture(t,e){return Lt(t,e)}static fromGpuBuffer(t,e){return kt(t,e)}static fromPinnedBuffer(t,e,i){return Ut(t,e,i)}toDataURL(t){return Dt(this,t)}toImageData(t){return Ct(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,t&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return jt(this,t)}}});var W,Re=P(()=>{"use strict";Ce();W=$});var Le,Gt=P(()=>{"use strict";De();Re();Le=class n{constructor(t){this.handler=t}async run(t,e,i){let s={},p={};if(typeof t!="object"||t===null||t instanceof W||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if(typeof e=="object"){if(e===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(e instanceof W)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(e)){if(e.length===0)throw new TypeError("'fetches' cannot be an empty array.");u=!1;for(let l of e){if(typeof l!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(l)===-1)throw new RangeError(`'fetches' contains invalid output name: ${l}.`);s[l]=null}if(typeof i=="object"&&i!==null)p=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else{let l=!1,h=Object.getOwnPropertyNames(e);for(let w of this.outputNames)if(h.indexOf(w)!==-1){let y=e[w];(y===null||y instanceof W)&&(l=!0,u=!1,s[w]=y)}if(l){if(typeof i=="object"&&i!==null)p=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else p=e}}else if(typeof e<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let l of this.inputNames)if(typeof t[l]>"u")throw new Error(`input '${l}' is missing in 'feeds'.`);if(u)for(let l of this.outputNames)s[l]=null;let f=await this.handler.run(t,s,p),d={};for(let l in f)if(Object.hasOwnProperty.call(f,l)){let h=f[l];h instanceof W?d[l]=h:d[l]=new W(h.type,h.data,h.dims)}return d}async release(){return this.handler.dispose()}static async create(t,e,i,s){let p,u={};if(typeof t=="string"){if(p=t,typeof e=="object"&&e!==null)u=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(p=t,typeof e=="object"&&e!==null)u=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let w=t,y=0,b=t.byteLength;if(typeof e=="object"&&e!==null)u=e;else if(typeof e=="number"){if(y=e,!Number.isSafeInteger(y))throw new RangeError("'byteOffset' must be an integer.");if(y<0||y>=w.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${w.byteLength}).`);if(b=t.byteLength-y,typeof i=="number"){if(b=i,!Number.isSafeInteger(b))throw new RangeError("'byteLength' must be an integer.");if(b<=0||y+b>w.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${w.byteLength-y}].`);if(typeof s=="object"&&s!==null)u=s;else if(typeof s<"u")throw new TypeError("'options' must be an object.")}else if(typeof i<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof e<"u")throw new TypeError("'options' must be an object.");p=new Uint8Array(w,y,b)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let d=(u.executionProviders||[]).map(w=>typeof w=="string"?w:w.name),h=await(await Be(d)).createInferenceSessionHandler(p,u);return new n(h)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}});var Yt,Vt=P(()=>{"use strict";Gt();Yt=Le});var qt=P(()=>{"use strict"});var Vr,ke,Xt=P(()=>{"use strict";De();Re();Vr="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",ke=class n{constructor(t){this.handler=t}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}static async create(t,e){let i=t.evalModel||"",s=t.optimizerModel||"",p=e||{},f=(p.executionProviders||[]).map(l=>typeof l=="string"?l:l.name),d=await Be(f);if(d.createTrainingSessionHandler){let l=await d.createTrainingSessionHandler(t.checkpointState,t.trainModel,i,s,p);return new n(l)}else throw new Error(Vr)}typeNarrowingForRunStep(t,e,i){let s={},p={};if(typeof t!="object"||t===null||t instanceof W||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if(typeof e=="object"){if(e===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(e instanceof W)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(e)){if(e.length===0)throw new TypeError("'fetches' cannot be an empty array.");u=!1;for(let f of e){if(typeof f!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(f)===-1)throw new RangeError(`'fetches' contains invalid output name: ${f}.`);s[f]=null}if(typeof i=="object"&&i!==null)p=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else{let f=!1,d=Object.getOwnPropertyNames(e);for(let l of this.outputNames)if(d.indexOf(l)!==-1){let h=e[l];(h===null||h instanceof W)&&(f=!0,u=!1,s[l]=h)}if(f){if(typeof i=="object"&&i!==null)p=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else p=e}}else if(typeof e<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let f of this.inputNames)if(typeof t[f]>"u")throw new Error(`input '${f}' is missing in 'feeds'.`);if(u)for(let f of this.outputNames)s[f]=null;return[s,p]}convertHandlerReturnTypeToMapOfTensors(t){let e={};for(let i in t)if(Object.hasOwnProperty.call(t,i)){let s=t[i];s instanceof W?e[i]=s:e[i]=new W(s.type,s.data,s.dims)}return e}async runTrainStep(t,e,i){let[s,p]=this.typeNarrowingForRunStep(t,e,i),u=await this.handler.runTrainStep(t,s,p);return this.convertHandlerReturnTypeToMapOfTensors(u)}async loadParametersBuffer(t,e){throw new Error("Method not implemented.")}async getContiguousParameters(t){throw new Error("Method not implemented.")}async release(){return this.handler.dispose()}}});var Jt,Kt=P(()=>{"use strict";Xt();Jt=ke});var Ke={};be(Ke,{InferenceSession:()=>Yt,Tensor:()=>W,TrainingSession:()=>Jt,env:()=>R,registerBackend:()=>re});var ce=P(()=>{"use strict";vt();Bt();Vt();Re();qt();Kt()});var Qt={};be(Qt,{readFile:()=>qr});var qr,er=P(()=>{qr=void 0});var tr={};be(tr,{join:()=>Xr});var Xr,rr=P(()=>{Xr=void 0});var sr=Gr((or,Ze)=>{"use strict";var nr=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(t={}){var e=t,i,s;e.ready=new Promise((r,o)=>{i=r,s=o});var p=Object.assign({},e),u="./this.program",f=typeof window=="object",d=typeof importScripts=="function",l=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",h="",w,y,b;if(l){var A=(er(),Pe(Qt)),O=(rr(),Pe(tr));h=d?O.dirname(h)+"/":__dirname+"/",w=(r,o)=>(r=r.startsWith("file://")?new URL(r):O.normalize(r),A.readFileSync(r,o?void 0:"utf8")),b=r=>(r=w(r,!0),r.buffer||(r=new Uint8Array(r)),r),y=(r,o,a,m=!0)=>{r=r.startsWith("file://")?new URL(r):O.normalize(r),A.readFile(r,m?void 0:"utf8",(g,S)=>{g?a(g):o(m?S.buffer:S)})},!e.thisProgram&&1<process.argv.length&&(u=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),e.inspect=()=>"[Emscripten Module object]"}else(f||d)&&(d?h=self.location.href:typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),n&&(h=n),h.indexOf("blob:")!==0?h=h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):h="",w=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.send(null),o.responseText},d&&(b=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),y=(r,o,a)=>{var m=new XMLHttpRequest;m.open("GET",r,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):a()},m.onerror=a,m.send(null)});var v=e.print||console.log.bind(console),_=e.printErr||console.error.bind(console);Object.assign(e,p),p=null,e.thisProgram&&(u=e.thisProgram);var D;e.wasmBinary&&(D=e.wasmBinary);var q=e.noExitRuntime||!0;typeof WebAssembly!="object"&&N("no native wasm support detected");var G,T,le=!1,ne,U,E,F;function Te(){var r=G.buffer;e.HEAP8=ne=new Int8Array(r),e.HEAP16=new Int16Array(r),e.HEAP32=E=new Int32Array(r),e.HEAPU8=U=new Uint8Array(r),e.HEAPU16=new Uint16Array(r),e.HEAPU32=F=new Uint32Array(r),e.HEAPF32=new Float32Array(r),e.HEAPF64=new Float64Array(r)}var he=[],te=[],x=[];function oe(){var r=e.preRun.shift();he.unshift(r)}var Q=0,Z=null,ee=null;function N(r){throw e.onAbort&&e.onAbort(r),r="Aborted("+r+")",_(r),le=!0,r=new WebAssembly.RuntimeError(r+". Build with -sASSERTIONS for more info."),s(r),r}function X(r){return r.startsWith("data:application/octet-stream;base64,")}var se;if(se="ort-wasm.wasm",!X(se)){var ie=se;se=e.locateFile?e.locateFile(ie,h):h+ie}function ye(r){if(r==se&&D)return new Uint8Array(D);if(b)return b(r);throw"both async and sync fetching of the wasm failed"}function Ae(r){if(!D&&(f||d)){if(typeof fetch=="function"&&!r.startsWith("file://"))return fetch(r,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at '"+r+"'";return o.arrayBuffer()}).catch(()=>ye(r));if(y)return new Promise((o,a)=>{y(r,m=>o(new Uint8Array(m)),a)})}return Promise.resolve().then(()=>ye(r))}function ve(r,o,a){return Ae(r).then(m=>WebAssembly.instantiate(m,o)).then(m=>m).then(a,m=>{_("failed to asynchronously prepare wasm: "+m),N(m)})}function ae(r,o){var a=se;return D||typeof WebAssembly.instantiateStreaming!="function"||X(a)||a.startsWith("file://")||l||typeof fetch!="function"?ve(a,r,o):fetch(a,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,r).then(o,function(g){return _("wasm streaming compile failed: "+g),_("falling back to ArrayBuffer instantiation"),ve(a,r,o)}))}var J,de=r=>{for(;0<r.length;)r.shift()(e)};function H(r){this.va=r-24,this.Ea=function(o){F[this.va+4>>2>>>0]=o},this.za=function(o){F[this.va+8>>2>>>0]=o},this.xa=function(o,a){this.ya(),this.Ea(o),this.za(a)},this.ya=function(){F[this.va+16>>2>>>0]=0}}var z=0,we=0,ge=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ie=(r,o,a)=>{o>>>=0;var m=o+a;for(a=o;r[a]&&!(a>=m);)++a;if(16<a-o&&r.buffer&&ge)return ge.decode(r.subarray(o,a));for(m="";o<a;){var g=r[o++];if(g&128){var S=r[o++]&63;if((g&224)==192)m+=String.fromCharCode((g&31)<<6|S);else{var I=r[o++]&63;g=(g&240)==224?(g&15)<<12|S<<6|I:(g&7)<<18|S<<12|I<<6|r[o++]&63,65536>g?m+=String.fromCharCode(g):(g-=65536,m+=String.fromCharCode(55296|g>>10,56320|g&1023))}}else m+=String.fromCharCode(g)}return m},je=(r,o)=>(r>>>=0)?Ie(U,r,o):"",$e=r=>{for(var o=0,a=0;a<r.length;++a){var m=r.charCodeAt(a);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++a):o+=3}return o},Ge=(r,o,a,m)=>{if(a>>>=0,!(0<m))return 0;var g=a;m=a+m-1;for(var S=0;S<r.length;++S){var I=r.charCodeAt(S);if(55296<=I&&57343>=I){var j=r.charCodeAt(++S);I=65536+((I&1023)<<10)|j&1023}if(127>=I){if(a>=m)break;o[a++>>>0]=I}else{if(2047>=I){if(a+1>=m)break;o[a++>>>0]=192|I>>6}else{if(65535>=I){if(a+2>=m)break;o[a++>>>0]=224|I>>12}else{if(a+3>=m)break;o[a++>>>0]=240|I>>18,o[a++>>>0]=128|I>>12&63}o[a++>>>0]=128|I>>6&63}o[a++>>>0]=128|I&63}}return o[a>>>0]=0,a-g},pe=r=>r%4===0&&(r%100!==0||r%400===0),ft=[0,31,60,91,121,152,182,213,244,274,305,335],ct=[0,31,59,90,120,151,181,212,243,273,304,334],lt=r=>{var o=$e(r)+1,a=yt(o);return a&&Ge(r,U,a,o),a},Ye={},dt=()=>{if(!Ve){var r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"},o;for(o in Ye)Ye[o]===void 0?delete r[o]:r[o]=Ye[o];var a=[];for(o in r)a.push(`${o}=${r[o]}`);Ve=a}return Ve},Ve,Fr=[null,[],[]],pt=[31,29,31,30,31,30,31,31,30,31,30,31],mt=[31,28,31,30,31,30,31,31,30,31,30,31];function Wr(r){var o=Array($e(r)+1);return Ge(r,o,0,o.length),o}function ht(r,o,a,m){function g(c,B,C){for(c=typeof c=="number"?c.toString():c||"";c.length<B;)c=C[0]+c;return c}function S(c,B){return g(c,B,"0")}function I(c,B){function C(At){return 0>At?-1:0<At?1:0}var ue;return(ue=C(c.getFullYear()-B.getFullYear()))===0&&(ue=C(c.getMonth()-B.getMonth()))===0&&(ue=C(c.getDate()-B.getDate())),ue}function j(c){switch(c.getDay()){case 0:return new Date(c.getFullYear()-1,11,29);case 1:return c;case 2:return new Date(c.getFullYear(),0,3);case 3:return new Date(c.getFullYear(),0,2);case 4:return new Date(c.getFullYear(),0,1);case 5:return new Date(c.getFullYear()-1,11,31);case 6:return new Date(c.getFullYear()-1,11,30)}}function K(c){var B=c.ra;for(c=new Date(new Date(c.sa+1900,0,1).getTime());0<B;){var C=c.getMonth(),ue=(pe(c.getFullYear())?pt:mt)[C];if(B>ue-c.getDate())B-=ue-c.getDate()+1,c.setDate(1),11>C?c.setMonth(C+1):(c.setMonth(0),c.setFullYear(c.getFullYear()+1));else{c.setDate(c.getDate()+B);break}}return C=new Date(c.getFullYear()+1,0,4),B=j(new Date(c.getFullYear(),0,4)),C=j(C),0>=I(B,c)?0>=I(C,c)?c.getFullYear()+1:c.getFullYear():c.getFullYear()-1}r>>>=0,o>>>=0,a>>>=0,m>>>=0;var Y=E[m+40>>2>>>0];m={Ca:E[m>>2>>>0],Ba:E[m+4>>2>>>0],ta:E[m+8>>2>>>0],wa:E[m+12>>2>>>0],ua:E[m+16>>2>>>0],sa:E[m+20>>2>>>0],ma:E[m+24>>2>>>0],ra:E[m+28>>2>>>0],Fa:E[m+32>>2>>>0],Aa:E[m+36>>2>>>0],Da:Y?je(Y):""},a=je(a),Y={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var V in Y)a=a.replace(new RegExp(V,"g"),Y[V]);var Ot="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Tt="January February March April May June July August September October November December".split(" ");Y={"%a":c=>Ot[c.ma].substring(0,3),"%A":c=>Ot[c.ma],"%b":c=>Tt[c.ua].substring(0,3),"%B":c=>Tt[c.ua],"%C":c=>S((c.sa+1900)/100|0,2),"%d":c=>S(c.wa,2),"%e":c=>g(c.wa,2," "),"%g":c=>K(c).toString().substring(2),"%G":c=>K(c),"%H":c=>S(c.ta,2),"%I":c=>(c=c.ta,c==0?c=12:12<c&&(c-=12),S(c,2)),"%j":c=>{for(var B=0,C=0;C<=c.ua-1;B+=(pe(c.sa+1900)?pt:mt)[C++]);return S(c.wa+B,3)},"%m":c=>S(c.ua+1,2),"%M":c=>S(c.Ba,2),"%n":()=>`
`,"%p":c=>0<=c.ta&&12>c.ta?"AM":"PM","%S":c=>S(c.Ca,2),"%t":()=>"	","%u":c=>c.ma||7,"%U":c=>S(Math.floor((c.ra+7-c.ma)/7),2),"%V":c=>{var B=Math.floor((c.ra+7-(c.ma+6)%7)/7);if(2>=(c.ma+371-c.ra-2)%7&&B++,B)B==53&&(C=(c.ma+371-c.ra)%7,C==4||C==3&&pe(c.sa)||(B=1));else{B=52;var C=(c.ma+7-c.ra-1)%7;(C==4||C==5&&pe(c.sa%400-1))&&B++}return S(B,2)},"%w":c=>c.ma,"%W":c=>S(Math.floor((c.ra+7-(c.ma+6)%7)/7),2),"%y":c=>(c.sa+1900).toString().substring(2),"%Y":c=>c.sa+1900,"%z":c=>{c=c.Aa;var B=0<=c;return c=Math.abs(c)/60,(B?"+":"-")+("0000"+(c/60*100+c%60)).slice(-4)},"%Z":c=>c.Da,"%%":()=>"%"},a=a.replace(/%%/g,"\0\0");for(V in Y)a.includes(V)&&(a=a.replace(new RegExp(V,"g"),Y[V](m)));return a=a.replace(/\0\0/g,"%"),V=Wr(a),V.length>o?0:(ne.set(V,r>>>0),V.length-1)}var Nr={a:function(r,o,a){throw r>>>=0,new H(r).xa(o>>>0,a>>>0),z=r,we++,z},e:function(){return 0},H:function(){},x:function(){},z:function(){},k:function(){return 0},F:function(){},B:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},l:()=>!0,o:function(r,o,a){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,a>>>=0,r=new Date(1e3*r),E[a>>2>>>0]=r.getUTCSeconds(),E[a+4>>2>>>0]=r.getUTCMinutes(),E[a+8>>2>>>0]=r.getUTCHours(),E[a+12>>2>>>0]=r.getUTCDate(),E[a+16>>2>>>0]=r.getUTCMonth(),E[a+20>>2>>>0]=r.getUTCFullYear()-1900,E[a+24>>2>>>0]=r.getUTCDay(),E[a+28>>2>>>0]=(r.getTime()-Date.UTC(r.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},p:function(r,o,a){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,a>>>=0,r=new Date(1e3*r),E[a>>2>>>0]=r.getSeconds(),E[a+4>>2>>>0]=r.getMinutes(),E[a+8>>2>>>0]=r.getHours(),E[a+12>>2>>>0]=r.getDate(),E[a+16>>2>>>0]=r.getMonth(),E[a+20>>2>>>0]=r.getFullYear()-1900,E[a+24>>2>>>0]=r.getDay(),E[a+28>>2>>>0]=(pe(r.getFullYear())?ft:ct)[r.getMonth()]+r.getDate()-1|0,E[a+36>>2>>>0]=-(60*r.getTimezoneOffset()),o=new Date(r.getFullYear(),6,1).getTimezoneOffset();var m=new Date(r.getFullYear(),0,1).getTimezoneOffset();E[a+32>>2>>>0]=(o!=m&&r.getTimezoneOffset()==Math.min(m,o))|0},q:function(r){r>>>=0;var o=new Date(E[r+20>>2>>>0]+1900,E[r+16>>2>>>0],E[r+12>>2>>>0],E[r+8>>2>>>0],E[r+4>>2>>>0],E[r>>2>>>0],0),a=E[r+32>>2>>>0],m=o.getTimezoneOffset(),g=new Date(o.getFullYear(),6,1).getTimezoneOffset(),S=new Date(o.getFullYear(),0,1).getTimezoneOffset(),I=Math.min(S,g);return 0>a?E[r+32>>2>>>0]=+(g!=S&&I==m):0<a!=(I==m)&&(g=Math.max(S,g),o.setTime(o.getTime()+6e4*((0<a?I:g)-m))),E[r+24>>2>>>0]=o.getDay(),E[r+28>>2>>>0]=(pe(o.getFullYear())?ft:ct)[o.getMonth()]+o.getDate()-1|0,E[r>>2>>>0]=o.getSeconds(),E[r+4>>2>>>0]=o.getMinutes(),E[r+8>>2>>>0]=o.getHours(),E[r+12>>2>>>0]=o.getDate(),E[r+16>>2>>>0]=o.getMonth(),E[r+20>>2>>>0]=o.getYear(),r=o.getTime()/1e3,wt((J=r,1<=+Math.abs(J)?0<J?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)),r>>>0},m:function(){return-52},n:function(){},t:function(r,o,a){function m(K){return(K=K.toTimeString().match(/\(([A-Za-z ]+)\)$/))?K[1]:"GMT"}a>>>=0;var g=new Date().getFullYear(),S=new Date(g,0,1),I=new Date(g,6,1);g=S.getTimezoneOffset();var j=I.getTimezoneOffset();F[r>>>0>>2>>>0]=60*Math.max(g,j),E[o>>>0>>2>>>0]=+(g!=j),r=m(S),o=m(I),r=lt(r),o=lt(o),j<g?(F[a>>2>>>0]=r,F[a+4>>2>>>0]=o):(F[a>>2>>>0]=o,F[a+4>>2>>>0]=r)},d:()=>{N("")},h:function(){return Date.now()},u:function(){return 4294901760},b:()=>performance.now(),I:function(r,o,a){return o>>>=0,U.copyWithin(r>>>0>>>0,o>>>0,o+(a>>>0)>>>0)},s:function(r){r>>>=0;var o=U.length;if(4294901760<r)return!1;for(var a=1;4>=a;a*=2){var m=o*(1+.2/a);m=Math.min(m,r+100663296);var g=Math;m=Math.max(r,m);e:{g=g.min.call(g,4294901760,m+(65536-m%65536)%65536)-G.buffer.byteLength+65535>>>16;try{G.grow(g),Te();var S=1;break e}catch{}S=void 0}if(S)return!0}return!1},C:function(r,o){r>>>=0,o>>>=0;var a=0;return dt().forEach(function(m,g){var S=o+a;for(g=F[r+4*g>>2>>>0]=S,S=0;S<m.length;++S)ne[g++>>0>>>0]=m.charCodeAt(S);ne[g>>0>>>0]=0,a+=m.length+1}),0},D:function(r,o){r>>>=0,o>>>=0;var a=dt();F[r>>2>>>0]=a.length;var m=0;return a.forEach(function(g){m+=g.length+1}),F[o>>2>>>0]=m,0},f:()=>52,j:function(){return 52},r:function(){return 70},i:function(r,o,a,m){o>>>=0,a>>>=0,m>>>=0;for(var g=0,S=0;S<a;S++){var I=F[o>>2>>>0],j=F[o+4>>2>>>0];o+=8;for(var K=0;K<j;K++){var Y=U[I+K>>>0],V=Fr[r];Y===0||Y===10?((r===1?v:_)(Ie(V,0)),V.length=0):V.push(Y)}g+=j}return F[m>>2>>>0]=g,0},A:ht,c:function(r,o,a,m){return ht(r>>>0,o>>>0,a>>>0,m>>>0)}};(function(){function r(a){if(a=a.exports,T=a=zr(a),G=T.J,Te(),te.unshift(T.K),Q--,e.monitorRunDependencies&&e.monitorRunDependencies(Q),Q==0&&(Z!==null&&(clearInterval(Z),Z=null),ee)){var m=ee;ee=null,m()}return a}var o={a:Nr};if(Q++,e.monitorRunDependencies&&e.monitorRunDependencies(Q),e.instantiateWasm)try{return e.instantiateWasm(o,r)}catch(a){_("Module.instantiateWasm callback failed with error: "+a),s(a)}return ae(o,function(a){r(a.instance)}).catch(s),{}})(),e._OrtInit=(r,o)=>(e._OrtInit=T.L)(r,o),e._OrtGetLastError=(r,o)=>(e._OrtGetLastError=T.M)(r,o),e._OrtCreateSessionOptions=(r,o,a,m,g,S,I,j,K,Y)=>(e._OrtCreateSessionOptions=T.N)(r,o,a,m,g,S,I,j,K,Y),e._OrtAppendExecutionProvider=(r,o)=>(e._OrtAppendExecutionProvider=T.O)(r,o),e._OrtAddFreeDimensionOverride=(r,o,a)=>(e._OrtAddFreeDimensionOverride=T.P)(r,o,a),e._OrtAddSessionConfigEntry=(r,o,a)=>(e._OrtAddSessionConfigEntry=T.Q)(r,o,a),e._OrtReleaseSessionOptions=r=>(e._OrtReleaseSessionOptions=T.R)(r),e._OrtCreateSession=(r,o,a)=>(e._OrtCreateSession=T.S)(r,o,a),e._OrtReleaseSession=r=>(e._OrtReleaseSession=T.T)(r),e._OrtGetInputOutputCount=(r,o,a)=>(e._OrtGetInputOutputCount=T.U)(r,o,a),e._OrtGetInputName=(r,o)=>(e._OrtGetInputName=T.V)(r,o),e._OrtGetOutputName=(r,o)=>(e._OrtGetOutputName=T.W)(r,o),e._OrtFree=r=>(e._OrtFree=T.X)(r),e._OrtCreateTensor=(r,o,a,m,g,S)=>(e._OrtCreateTensor=T.Y)(r,o,a,m,g,S),e._OrtGetTensorData=(r,o,a,m,g)=>(e._OrtGetTensorData=T.Z)(r,o,a,m,g),e._OrtReleaseTensor=r=>(e._OrtReleaseTensor=T._)(r),e._OrtCreateRunOptions=(r,o,a,m)=>(e._OrtCreateRunOptions=T.$)(r,o,a,m),e._OrtAddRunConfigEntry=(r,o,a)=>(e._OrtAddRunConfigEntry=T.aa)(r,o,a),e._OrtReleaseRunOptions=r=>(e._OrtReleaseRunOptions=T.ba)(r),e._OrtCreateBinding=r=>(e._OrtCreateBinding=T.ca)(r),e._OrtBindInput=(r,o,a)=>(e._OrtBindInput=T.da)(r,o,a),e._OrtBindOutput=(r,o,a,m)=>(e._OrtBindOutput=T.ea)(r,o,a,m),e._OrtClearBoundOutputs=r=>(e._OrtClearBoundOutputs=T.fa)(r),e._OrtReleaseBinding=r=>(e._OrtReleaseBinding=T.ga)(r),e._OrtRunWithBinding=(r,o,a,m,g)=>(e._OrtRunWithBinding=T.ha)(r,o,a,m,g),e._OrtRun=(r,o,a,m,g,S,I,j)=>(e._OrtRun=T.ia)(r,o,a,m,g,S,I,j),e._OrtEndProfiling=r=>(e._OrtEndProfiling=T.ja)(r);var yt=e._malloc=r=>(yt=e._malloc=T.ka)(r);e._free=r=>(e._free=T.la)(r);var wt=r=>(wt=T.na)(r),gt=()=>(gt=T.oa)(),bt=r=>(bt=T.pa)(r),Et=r=>(Et=T.qa)(r);function zr(r){r=Object.assign({},r);var o=m=>()=>m()>>>0,a=m=>g=>m(g)>>>0;return r.__errno_location=o(r.__errno_location),r.malloc=a(r.malloc),r.stackSave=o(r.stackSave),r.stackAlloc=a(r.stackAlloc),r}e.stackAlloc=Et,e.stackSave=gt,e.stackRestore=bt,e.UTF8ToString=je,e.stringToUTF8=(r,o,a)=>Ge(r,U,o,a),e.lengthBytesUTF8=$e;var xe;ee=function r(){xe||St(),xe||(ee=r)};function St(){function r(){if(!xe&&(xe=!0,e.calledRun=!0,!le)){if(de(te),i(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;){var o=e.postRun.shift();x.unshift(o)}de(x)}}if(!(0<Q)){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)oe();de(he),0<Q||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),r()},1)):r())}}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return St(),t.ready}})();typeof or=="object"&&typeof Ze=="object"?Ze.exports=nr:typeof define=="function"&&define.amd&&define([],()=>nr)});var tt,Jr,Qe,et,Ue,ir,Kr,Zr,Qr,ar,L,me=P(()=>{"use strict";tt=sr();Jr=tt,et=!1,Ue=!1,ir=!1,Kr=()=>{try{return typeof SharedArrayBuffer>"u"?!1:(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}},Zr=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},Qr=(n,t)=>n?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",ar=async n=>{if(et)return Promise.resolve();if(Ue)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(ir)throw new Error("previous call to 'initializeWebAssembly()' failed.");Ue=!0;let t=n.initTimeout,e=n.numThreads,i=n.simd,s=e>1&&Kr(),p=i&&Zr(),u=n.wasmPaths,f=typeof u=="string"?u:void 0,d=Qr(p,s),l=typeof u=="object"?u[d]:void 0,h=!1,w=[];if(t>0&&w.push(new Promise(y=>{setTimeout(()=>{h=!0,y()},t)})),w.push(new Promise((y,b)=>{(s?Jr:tt)({locateFile:(v,_)=>v.endsWith(".wasm")?l||(f??_)+d:_+v}).then(v=>{Ue=!1,et=!0,Qe=v,y()},v=>{Ue=!1,ir=!0,b(v)})})),await Promise.race(w),h)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},L=()=>{if(et&&Qe)return Qe;throw new Error("WebAssembly is not initialized yet.")}});var k,Se,M,Fe=P(()=>{"use strict";me();k=(n,t)=>{let e=L(),i=e.lengthBytesUTF8(n)+1,s=e._malloc(i);return e.stringToUTF8(n,s,i),t.push(s),s},Se=(n,t,e,i)=>{if(typeof n=="object"&&n!==null){if(e.has(n))throw new Error("Circular reference in options");e.add(n)}Object.entries(n).forEach(([s,p])=>{let u=t?t+s:s;if(typeof p=="object")Se(p,u+".",e,i);else if(typeof p=="string"||typeof p=="number")i(u,p.toString());else if(typeof p=="boolean")i(u,p?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof p}`)})},M=n=>{let t=L(),e=t.stackSave();try{let i=t.stackAlloc(8);t._OrtGetLastError(i,i+4);let s=t.HEAP32[i/4],p=t.HEAPU32[i/4+1],u=p?t.UTF8ToString(p):"";throw new Error(`${n} ERROR_CODE: ${s}, ERROR_MESSAGE: ${u}`)}finally{t.stackRestore(e)}}});var ur,fr=P(()=>{"use strict";me();Fe();ur=n=>{let t=L(),e=0,i=[],s=n||{};try{if(n?.logSeverityLevel===void 0)s.logSeverityLevel=2;else if(typeof n.logSeverityLevel!="number"||!Number.isInteger(n.logSeverityLevel)||n.logSeverityLevel<0||n.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${n.logSeverityLevel}`);if(n?.logVerbosityLevel===void 0)s.logVerbosityLevel=0;else if(typeof n.logVerbosityLevel!="number"||!Number.isInteger(n.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${n.logVerbosityLevel}`);n?.terminate===void 0&&(s.terminate=!1);let p=0;return n?.tag!==void 0&&(p=k(n.tag,i)),e=t._OrtCreateRunOptions(s.logSeverityLevel,s.logVerbosityLevel,!!s.terminate,p),e===0&&M("Can't create run options."),n?.extra!==void 0&&Se(n.extra,"",new WeakSet,(u,f)=>{let d=k(u,i),l=k(f,i);t._OrtAddRunConfigEntry(e,d,l)!==0&&M(`Can't set a run config entry: ${u} - ${f}.`)}),[e,i]}catch(p){throw e!==0&&t._OrtReleaseRunOptions(e),i.forEach(u=>t._free(u)),p}}});var en,tn,rn,nn,cr,lr=P(()=>{"use strict";me();Fe();en=n=>{switch(n){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${n}`)}},tn=n=>{switch(n){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${n}`)}},rn=n=>{n.extra||(n.extra={}),n.extra.session||(n.extra.session={});let t=n.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),n.executionProviders&&n.executionProviders.some(e=>(typeof e=="string"?e:e.name)==="webgpu")&&(n.enableMemPattern=!1)},nn=(n,t,e)=>{for(let i of t){let s=typeof i=="string"?i:i.name;switch(s){case"xnnpack":s="XNNPACK";break;case"webnn":if(s="WEBNN",typeof i!="string"){let u=i;if(u?.deviceType){let f=k("deviceType",e),d=k(u.deviceType,e);L()._OrtAddSessionConfigEntry(n,f,d)!==0&&M(`Can't set a session config entry: 'deviceType' - ${u.deviceType}.`)}if(u?.powerPreference){let f=k("powerPreference",e),d=k(u.powerPreference,e);L()._OrtAddSessionConfigEntry(n,f,d)!==0&&M(`Can't set a session config entry: 'powerPreference' - ${u.powerPreference}.`)}}break;case"webgpu":if(s="JS",typeof i!="string"){let u=i;if(u?.preferredLayout){if(u.preferredLayout!=="NCHW"&&u.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${u.preferredLayout}`);let f=k("preferredLayout",e),d=k(u.preferredLayout,e);L()._OrtAddSessionConfigEntry(n,f,d)!==0&&M(`Can't set a session config entry: 'preferredLayout' - ${u.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${s}`)}let p=k(s,e);L()._OrtAppendExecutionProvider(n,p)!==0&&M(`Can't append execution provider: ${s}.`)}},cr=n=>{let t=L(),e=0,i=[],s=n||{};rn(s);try{let p=en(s.graphOptimizationLevel??"all"),u=tn(s.executionMode??"sequential"),f=typeof s.logId=="string"?k(s.logId,i):0,d=s.logSeverityLevel??2;if(!Number.isInteger(d)||d<0||d>4)throw new Error(`log serverity level is not valid: ${d}`);let l=s.logVerbosityLevel??0;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log verbosity level is not valid: ${l}`);let h=typeof s.optimizedModelFilePath=="string"?k(s.optimizedModelFilePath,i):0;if(e=t._OrtCreateSessionOptions(p,!!s.enableCpuMemArena,!!s.enableMemPattern,u,!!s.enableProfiling,0,f,d,l,h),e===0&&M("Can't create session options."),s.executionProviders&&nn(e,s.executionProviders,i),s.freeDimensionOverrides)for(let[w,y]of Object.entries(s.freeDimensionOverrides)){if(typeof w!="string")throw new Error(`free dimension override name must be a string: ${w}`);if(typeof y!="number"||!Number.isInteger(y)||y<0)throw new Error(`free dimension override value must be a non-negative integer: ${y}`);let b=k(w,i);t._OrtAddFreeDimensionOverride(e,b,y)!==0&&M(`Can't set a free dimension override: ${w} - ${y}.`)}return s.extra!==void 0&&Se(s.extra,"",new WeakSet,(w,y)=>{let b=k(w,i),A=k(y,i);t._OrtAddSessionConfigEntry(e,b,A)!==0&&M(`Can't set a session config entry: ${w} - ${y}.`)}),[e,i]}catch(p){throw e!==0&&t._OrtReleaseSessionOptions(e),i.forEach(u=>t._free(u)),p}}});var rt,dr,nt,pr,mr,We,hr,ot=P(()=>{"use strict";rt=n=>{switch(n){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${n}`)}},dr=n=>{switch(n){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${n}`)}},nt=n=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][n],pr=n=>{switch(n){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${n}`)}},mr=n=>{switch(n){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${n}`)}},We=n=>n==="float32"||n==="int32"||n==="int64"||n==="bool"||n==="float16"||n==="uint32",hr=n=>{switch(n){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${n}`)}}});var wr,on,sn,gr,Oe,br,st,it,Er,Sr,yr,Or,Tr,Ar=P(()=>{"use strict";fr();lr();ot();me();Fe();wr=!1,on=n=>{let t=L(),e=t.stackSave();try{let i=t.stackAlloc(8);return t._OrtGetInputOutputCount(n,i,i+4)!==0&&M("Can't get session input/output count."),[t.HEAP32[i/4],t.HEAP32[i/4+1]]}finally{t.stackRestore(e)}},sn=(n,t)=>{L()._OrtInit(n,t)!==0&&M("Can't initialize onnxruntime.")},gr=async n=>{sn(n.wasm.numThreads,mr(n.logLevel)),wr=!0},Oe=new Map,br=()=>wr,st=n=>{let t=L(),e=t._malloc(n.byteLength);if(e===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${n.byteLength}.`);return t.HEAPU8.set(n,e),[e,n.byteLength]},it=(n,t)=>{let e=L(),i=0,s=0,p=0,u=[],f=[],d=[];try{[s,u]=cr(t),i=e._OrtCreateSession(n[0],n[1],s),i===0&&M("Can't create a session.");let[l,h]=on(i),w=[],y=[],b=[];for(let O=0;O<l;O++){let v=e._OrtGetInputName(i,O);v===0&&M("Can't get an input name."),f.push(v),w.push(e.UTF8ToString(v))}for(let O=0;O<h;O++){let v=e._OrtGetOutputName(i,O);v===0&&M("Can't get an output name."),d.push(v);let _=e.UTF8ToString(v);y.push(_)}let A=null;return Oe.set(i,[i,f,d,A]),[i,w,y]}catch(l){throw f.forEach(h=>e._OrtFree(h)),d.forEach(h=>e._OrtFree(h)),p!==0&&e._OrtReleaseBinding(p),i!==0&&e._OrtReleaseSession(i),l}finally{e._free(n[0]),s!==0&&e._OrtReleaseSessionOptions(s),u.forEach(l=>e._free(l))}},Er=(n,t)=>{let e=st(n);return it(e,t)},Sr=n=>{let t=L(),e=Oe.get(n);if(!e)throw new Error(`cannot release session. invalid session id: ${n}`);let[i,s,p,u]=e;u&&t._OrtReleaseBinding(u.handle),t.jsepUnregisterBuffers?.(n),s.forEach(f=>t._OrtFree(f)),p.forEach(f=>t._OrtFree(f)),t._OrtReleaseSession(i),Oe.delete(n)},yr=(n,t,e,i,s)=>{if(!n){t.push(0);return}let p=L(),u=n[0],f=n[1],d=n[3],l,h;if(u==="string"&&d==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(d==="gpu-buffer"){let b=n[2].gpuBuffer,A=nt(rt(u));h=f.reduce((O,v)=>O*v,1)*A,l=p.jsepRegisterBuffer(i,s,b,h)}else{let b=n[2];if(Array.isArray(b)){h=4*b.length,l=p._malloc(h),e.push(l);let A=l/4;for(let O=0;O<b.length;O++){if(typeof b[O]!="string")throw new TypeError(`tensor data at index ${O} is not a string`);p.HEAPU32[A++]=k(b[O],e)}}else h=b.byteLength,l=p._malloc(h),e.push(l),p.HEAPU8.set(new Uint8Array(b.buffer,b.byteOffset,h),l)}let w=p.stackSave(),y=p.stackAlloc(4*f.length);try{let b=y/4;f.forEach(O=>p.HEAP32[b++]=O);let A=p._OrtCreateTensor(rt(u),l,h,y,f.length,hr(d));A===0&&M(`Can't create tensor for input/output. session=${i}, index=${s}.`),t.push(A)}finally{p.stackRestore(w)}},Or=async(n,t,e,i,s,p)=>{let u=L(),f=Oe.get(n);if(!f)throw new Error(`cannot run inference. invalid session id: ${n}`);let[d,l,h,w]=f,y=t.length,b=i.length,A=0,O=[],v=[],_=[],D=[],q=u.stackSave(),G=u.stackAlloc(y*4),T=u.stackAlloc(y*4),le=u.stackAlloc(b*4),ne=u.stackAlloc(b*4);try{[A,O]=ur(p);for(let x=0;x<y;x++)yr(e[x],v,D,n,t[x]);for(let x=0;x<b;x++)yr(s[x],_,D,n,y+i[x]);let U=G/4,E=T/4,F=le/4,Te=ne/4;for(let x=0;x<y;x++)u.HEAPU32[U++]=v[x],u.HEAPU32[E++]=l[t[x]];for(let x=0;x<b;x++)u.HEAPU32[F++]=_[x],u.HEAPU32[Te++]=h[i[x]];let he;he=await u._OrtRun(d,T,G,y,ne,b,le,A),he!==0&&M("failed to call OrtRun().");let te=[];for(let x=0;x<b;x++){let oe=u.HEAPU32[le/4+x];if(oe===_[x]){te.push(s[x]);continue}let Q=u.stackSave(),Z=u.stackAlloc(4*4),ee=!1,N,X=0;try{u._OrtGetTensorData(oe,Z,Z+4,Z+8,Z+12)!==0&&M(`Can't access output tensor data on index ${x}.`);let ie=Z/4,ye=u.HEAPU32[ie++];X=u.HEAPU32[ie++];let Ae=u.HEAPU32[ie++],ve=u.HEAPU32[ie++],ae=[];for(let H=0;H<ve;H++)ae.push(u.HEAPU32[Ae/4+H]);u._OrtFree(Ae);let J=ae.reduce((H,z)=>H*z,1);N=dr(ye);let de=w?.outputPreferredLocations[i[x]];if(N==="string"){if(de==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let H=[],z=X/4;for(let we=0;we<J;we++){let ge=u.HEAPU32[z++],Ie=we===J-1?void 0:u.HEAPU32[z]-ge;H.push(u.UTF8ToString(ge,Ie))}te.push([N,ae,H,"cpu"])}else if(de==="gpu-buffer"&&J>0){let H=u.jsepGetBuffer(X),z=nt(ye);if(z===void 0||!We(N))throw new Error(`Unsupported data type: ${N}`);ee=!0,te.push([N,ae,{gpuBuffer:H,download:u.jsepCreateDownloader(H,J*z,N),dispose:()=>{u._OrtReleaseTensor(oe)}},"gpu-buffer"])}else{let H=pr(N),z=new H(J);new Uint8Array(z.buffer,z.byteOffset,z.byteLength).set(u.HEAPU8.subarray(X,X+z.byteLength)),te.push([N,ae,z,"cpu"])}}finally{u.stackRestore(Q),N==="string"&&X&&u._free(X),ee||u._OrtReleaseTensor(oe)}}return w&&u._OrtClearBoundOutputs(w.handle),te}finally{u.stackRestore(q),v.forEach(U=>u._OrtReleaseTensor(U)),_.forEach(U=>u._OrtReleaseTensor(U)),D.forEach(U=>u._free(U)),A!==0&&u._OrtReleaseRunOptions(A),O.forEach(U=>u._free(U))}},Tr=n=>{let t=L(),e=Oe.get(n);if(!e)throw new Error("invalid session id");let i=e[0],s=t._OrtEndProfiling(i);s===0&&M("Can't get an profile file name."),t._OrtFree(s)}});var bo,vr,Ir,xr,Pr,at,_r,Br,Dr,Cr,ut=P(()=>{"use strict";ce();Ar();me();bo=typeof document<"u"?document?.currentScript?.src:void 0,vr=async()=>ar(R.wasm),Ir=async n=>{await gr(n)},xr=async n=>st(n),Pr=async(n,t)=>it(n,t),at=async(n,t)=>Er(n,t),_r=async n=>{Sr(n)},Br=async(n,t,e,i,s,p)=>Or(n,t,e,i,s,p),Dr=async n=>{Tr(n)},Cr=async()=>br()});var Ne,Mr,un,ze,Rr=P(()=>{"use strict";ce();ut();ot();Mr=(n,t)=>{switch(n.location){case"cpu":return[n.type,n.dims,n.data,"cpu"];case"gpu-buffer":return[n.type,n.dims,{gpuBuffer:n.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${n.location} for ${t()}`)}},un=n=>{switch(n[3]){case"cpu":return new W(n[0],n[2],n[1]);case"gpu-buffer":{let t=n[0];if(!We(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:e,download:i,dispose:s}=n[2];return W.fromGpuBuffer(e,{dataType:t,dims:n[1],download:i,dispose:s})}default:throw new Error(`invalid data location: ${n[3]}`)}},ze=class{async createSessionAllocate(t){let e=await fetch(t);if(e.status!==200)throw new Error(`failed to load model: ${t}`);let i=await e.arrayBuffer();return xr(new Uint8Array(i))}async loadModel(t,e){if(await Cr()||(Ne||(Ne=Ir(R)),await Ne,Ne=void 0),typeof t=="string")if(typeof process<"u"&&process.versions&&process.versions.node){let i=await(void 0)(t);[this.sessionId,this.inputNames,this.outputNames]=await at(i,e)}else{let i=await this.createSessionAllocate(t);[this.sessionId,this.inputNames,this.outputNames]=await Pr(i,e)}else[this.sessionId,this.inputNames,this.outputNames]=await at(t,e)}async dispose(){return _r(this.sessionId)}async run(t,e,i){let s=[],p=[];Object.entries(t).forEach(y=>{let b=y[0],A=y[1],O=this.inputNames.indexOf(b);if(O===-1)throw new Error(`invalid input '${b}'`);s.push(A),p.push(O)});let u=[],f=[];Object.entries(e).forEach(y=>{let b=y[0],A=y[1],O=this.outputNames.indexOf(b);if(O===-1)throw new Error(`invalid output '${b}'`);u.push(A),f.push(O)});let d=s.map((y,b)=>Mr(y,()=>`input "${this.inputNames[p[b]]}"`)),l=u.map((y,b)=>y?Mr(y,()=>`output "${this.outputNames[f[b]]}"`):null),h=await Br(this.sessionId,p,d,f,l,i),w={};for(let y=0;y<h.length;y++)w[this.outputNames[f[y]]]=u[y]??un(h[y]);return w}startProfiling(){}endProfiling(){Dr(this.sessionId)}}});var fn,He,Lr=P(()=>{"use strict";ce();ut();Rr();fn=()=>{if((typeof R.wasm.initTimeout!="number"||R.wasm.initTimeout<0)&&(R.wasm.initTimeout=0),typeof R.wasm.simd!="boolean"&&(R.wasm.simd=!0),typeof R.wasm.proxy!="boolean"&&(R.wasm.proxy=!1),typeof R.wasm.numThreads!="number"||!Number.isInteger(R.wasm.numThreads)||R.wasm.numThreads<=0){let n=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;R.wasm.numThreads=Math.min(4,Math.ceil((n||1)/2))}},He=class{async init(){fn(),await vr()}async createInferenceSessionHandler(t,e){let i=new ze;return await i.loadModel(t,e),Promise.resolve(i)}}});var kr={};be(kr,{wasmBackend:()=>cn});var cn,Ur=P(()=>{"use strict";Lr();cn=new He});var dn={};be(dn,{InferenceSession:()=>Yt,Tensor:()=>W,TrainingSession:()=>Jt,default:()=>ln,env:()=>R,registerBackend:()=>re});ce();ce();ce();var Zt="1.17.0-dev.20231103-1439da36fe";var ln=Ke;{let n=(Ur(),Pe(kr)).wasmBackend;re("cpu",n,10),re("wasm",n,10),re("xnnpack",n,9),re("webnn",n,9)}Object.defineProperty(R.versions,"web",{value:Zt,enumerable:!0});return Pe(dn);})();
//# sourceMappingURL=ort.wasm-core.min.js.map
